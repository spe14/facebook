<!DOCTYPE html>
<html>
  <head>
     <link rel="shortcut icon" href="/favicon.ico?v=1.1" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
  </head>
  <script type="text/javascript">
    function validate(
      form,
      currpassword,
      newpassword,
      email,
      affiliation
    ) {
      var mailFormat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
      
      var interests = form.interests;
      var count = 0;

      for (i = 0; i < interests.length; i++) {
        if (interests[i].checked) {
          count++;
        }
      }
      
      if (currpassword == "") {
    	  console.log("curr pass empty");
    	  alert("Please enter your password!");
    	  return false;
      } else if(newpassword == "" && email == "" && affiliation == "" && count == 0) {
    	  alert("Please enter what you would like to update!");
    	  return false;
      } else if (email != "" && !email.match(mailFormat)) {
        alert("Please enter a valid email address!");
        return false;
      } else {
        if (count != 0 && count < 2) {
          alert("Please select 2 or more interests!");
          return false;
        }
      }
      return true;
    }
  </script>
  <body>
     <nav class="navbar navbar-expand-lg navbar-light bg-white">
      <a class="navbar-brand" href="/homepage">PennBook</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#"
              >Home <span class="sr-only">(current)</span></a
            >
          </li>
          <li class="nav-item">
            <form onsubmit = "yourFunction(); return false">
                <input type="text" id="friend" name="userid">
              </label><input type="submit" value="Search For a Friend!">
              <br>
            </form>


          </li>
          <li>	<div class="ui-widget">

 
    </div></li>
         
        
        </ul>
      </div>
    </nav>
    
    <div class="container-fluid h-100 bg-light">
      
      <div class="row h-100">
        <div class="col-3" id="blue">
          <h4 style="margin-top: 10px";><%= user %></h4>
          <!-- Navigation links in sidebar-->
          <a href="/homepage">Home</a>
          <br />
          <a href="/signup">Sign Up</a>
          <br />
          <a href="/change">Change My Account</a>
          <br />
          <a href="/addfriendspage">Add Friends</a>
          <br />
          <a href="/viewfriends">View My Friends</a>
          <br />
          <a href="/createchat">Create Chatroom</a>
          <br />
        </div>
          <div class="col-9" style="text-align: justify; height: 720px; ">
    <h1>Change Account</h1>
            
    <form
      action="/changeaccount"
      method="post"
      onsubmit="return validate(this, document.getElementById('password').value, 
      document.getElementById('newpassword').value, document.getElementById('newemail').value,
       document.getElementById('newaffiliation').value)"
    >
      <label for="password">Enter your current password here: </label><br />
      <input type="text" id="password" name="password" /><br />
      <br />
      <label for="newpassword">Enter your new password here: </label><br />
      <input type="text" id="newpassword" name="newpassword" /><br />
      <br />
      <label for="newemail">Enter your new email address here: </label><br />
      <input type="text" id="newemail" name="newemail" /><br />
      <br />
      <label for="newaffiliation">Enter your new affiliation here: </label><br />
      <input type="text" id="newaffiliation" name="newaffiliation" /><br />
      <br />
              
      <fieldset>
        <legend>Select your new interests: (Pick at least 2)</legend>
        <div class = "row">
          <div class = "column-sm">
        <div>
          <input type="checkbox" id="1" name="interests" value="Politics" />
          <label for="Politics">Politics</label>
        </div>
        <div>
          <input type="checkbox" id="2" name="interests" value="Wellness" />
          <label for="Wellness">Wellness</label>
        </div>
        <div>
          <input
            type="checkbox"
            id="3"
            name="interests"
            value="Entertainment"
          />
          <label for="Entertainment">Entertainment</label>
        </div>
        <div>
          <input type="checkbox" id="4" name="interests" value="Travel" />
          <label for="Travel">Travel</label>
        </div>
        <div>
          <input
            type="checkbox"
            id="5"
            name="interests"
            value="Style and Beauty"
          />
          <label for="Style and Beauty">Style and Beauty</label>
        </div>
        <div>
          <input type="checkbox" id="6" name="interests" value="Parenting" />
          <label for="Parenting">Parenting</label>
        </div>
        <div>
          <input
            type="checkbox"
            id="7"
            name="interests"
            value="Healthy Living"
          />
          <label for="Healthy Living">Healthy Living</label>
        </div>
      </div>
      <div class="column sm">
        <div>
          <input type="checkbox" id="8" name="interests" value="Queer Voices" />
          <label for="Queer Voices">Queer Voices</label>
        </div>
        <div>
          <input
            type="checkbox"
            id="9"
            name="interests"
            value="Food and Drink"
          />
          <label for="Food and Drink">Food and Drink</label>
        </div>
        <div>
          <input type="checkbox" id="10" name="interests" value="Business" />
          <label for="Business">Business</label>
        </div>
        <div>
          <input type="checkbox" id="11" name="interests" value="Comedy" />
          <label for="Comedy">Comedy</label>
        </div>
        <div>
          <input type="checkbox" id="12" name="interests" value="Sports" />
          <label for="Sports">Sports</label>
        </div>
        <div>
          <input
            type="checkbox"
            id="13"
            name="interests"
            value="Black Voices"
          />
          <label for="Black Voices">Black Voices</label>
        </div>
        <div>
          <input
            type="checkbox"
            id="14"
            name="interests"
            value="Home and Living"
          />
          <label for="Home and Living">Home and Living</label>
        </div>
        <div>
          <input type="checkbox" id="15" name="interests" value="Parents" />
          <label for="Parents">Parents</label>
        </div>
      </div>
      <div>
    </fieldset>

      <input type="submit" value="Update Account" />
    </form>

    <%if (message != null) { %>
    <p> <font color="red" size="3"><%= message %></p>
    <% } %>
  </body>
</html>
